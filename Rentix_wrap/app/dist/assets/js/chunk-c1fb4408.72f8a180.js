(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1fb4408"],{"0cef":function(e,t,r){},"1fcc":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"repair-settings"},[r("div",{staticClass:"tables"},[r("div",{staticClass:"table__container"},[r("h3",{staticClass:"table__caption"},[e._v("Плановое ТО")]),r("table",e._l(e.planRepairTypes,function(t){return r("tr",{key:t.id_rent,staticClass:"pointer",on:{click:function(r){return e.selectType(t)}}},[r("td",[e._v(e._s(t.name))]),r("td",[e._v(" - ")]),r("td",{staticStyle:{"text-align":"right"}},[e._v("\n                         "+e._s(t.period)+" ч.\n                    ")])])}),0)]),r("div",{staticClass:"table__container"},[r("h3",{staticClass:"table__caption"},[e._v("Внеплановое ТО")]),r("table",e._l(e.notPlanRepairTypes,function(t){return r("tr",{key:t.id_rent,staticClass:"pointer",on:{click:function(r){return e.selectType(t)}}},[r("td",[e._v(e._s(t.name))])])}),0)])]),"details"===e.show?r("DetailsType",{attrs:{_repairType:e.repairType},on:{close:function(t){return e.closeDetails()}}}):e._e(),r("button",{staticClass:"button repair-settings__button",on:{click:function(t){return e.createType()}}},[e._v("Добавить")])],1)},a=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"canvas"},[r("div",{staticClass:"details details--repair-type"},[r("h3",[e.repairType.isNew?r("span",[e._v("Новый тип ремонта")]):r("span",[e._v("Редактировать ремонт")])]),e.errors?r("div",{staticClass:"errors"},[r("ul",e._l(e.errors,function(t){return r("li",{key:t},[e._v(e._s(t))])}),0)]):e._e(),r("table",[r("tr",[r("td",[e._v("Название")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.repairType.name,expression:"repairType.name"}],attrs:{type:"text"},domProps:{value:e.repairType.name},on:{input:function(t){t.target.composing||e.$set(e.repairType,"name",t.target.value)}}})])]),r("tr",[e._m(0),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.repairType.is_plan,expression:"repairType.is_plan"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.repairType.is_plan)?e._i(e.repairType.is_plan,null)>-1:e.repairType.is_plan},on:{change:function(t){var r=e.repairType.is_plan,i=t.target,a=!!i.checked;if(Array.isArray(r)){var s=null,n=e._i(r,s);i.checked?n<0&&e.$set(e.repairType,"is_plan",r.concat([s])):n>-1&&e.$set(e.repairType,"is_plan",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.repairType,"is_plan",a)}}})])]),e.repairType.is_plan?r("tr",[e._m(1),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.repairType.period,expression:"repairType.period"}],attrs:{type:"text"},domProps:{value:e.repairType.period},on:{input:function(t){t.target.composing||e.$set(e.repairType,"period",t.target.value)}}})])]):e._e(),r("tr",[r("td",[e._v("Примечание")]),r("td",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.repairType.note,expression:"repairType.note"}],domProps:{value:e.repairType.note},on:{input:function(t){t.target.composing||e.$set(e.repairType,"note",t.target.value)}}})])])]),r("div",{staticClass:"btn-group"},[r("button",{on:{click:e.save}},[e._v("Сохранить")]),r("button",{on:{click:e.close}},[e._v("Отмена")]),e.repairType.isNew?e._e():r("button",{on:{click:e.remove}},[e._v("Удалить")])]),r("div",{staticClass:"details__close",on:{click:e.close}})])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("td",[e._v("Используется "),r("br"),e._v(" в плановом ТО")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("td",[e._v("Прериод "),r("br"),e._v(" проведения ТО, часов")])}],p=(r("7f7f"),r("c060")),o={props:{_repairType:Object},data:function(){return{repairType:Object(p["a"])(this._repairType),errors:null}},methods:{close:function(){this.$emit("close")},save:function(){this.validate(),this.errors||(this.$store.dispatch("setRepairType",this.repairType),this.$emit("close"))},remove:function(){confirm("Хотите безвозвратно удалить этот тип ремонта?")&&(this.$store.dispatch("deleteRepairType",this.repairType.id_rent),this.$emit("close"))},validate:function(){var e=[];this.repairType.name||e.push("Укажите название типа"),this.repairType.name&&this.repairType.name.length<3&&e.push("Название должно иметь не менее 3 символов"),this.repairType.is_plan&&!this.repairType.period&&e.push("Укажите период проведения ТО"),this.repairType.is_plan&&this.repairType.period<=0&&e.push("Период ТО быть положительным числом");var t=/^\d+$/;this.repairType.is_plan&&this.repairType.period&&!t.test(this.repairType.period)&&e.push("Период ТО быть положительным числом"),this.errors=e.length>0?e:null}}},l=o,c=(r("f484"),r("2877")),u=Object(c["a"])(l,s,n,!1,null,"8a31a45c",null),_=u.exports,y={components:{DetailsType:_},data:function(){return{show:"list",repairType:null}},methods:{createType:function(){this.repairType={isNew:!0,name:"",is_plan:!1,period:0},this.show="details"},selectType:function(e){e.is_plan="1"===e.is_plan,this.repairType=e,this.show="details"},closeDetails:function(){this.show="list",this.repairType=null}},computed:{repairTypes:function(){var e=this.$store.getters.repairTypes;return e.filter(function(e){return"active"===e.status})},planRepairTypes:function(){return this.repairTypes.filter(function(e){return"1"===e.is_plan})},notPlanRepairTypes:function(){return this.repairTypes.filter(function(e){return"1"!==e.is_plan})}}},d=y,v=(r("af10"),Object(c["a"])(d,i,a,!1,null,"3ba99ff6",null));t["default"]=v.exports},5864:function(e,t,r){},af10:function(e,t,r){"use strict";var i=r("0cef"),a=r.n(i);a.a},f484:function(e,t,r){"use strict";var i=r("5864"),a=r.n(i);a.a}}]);
//# sourceMappingURL=chunk-c1fb4408.72f8a180.js.map