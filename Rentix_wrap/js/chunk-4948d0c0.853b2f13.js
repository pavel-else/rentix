(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4948d0c0"],{"0983":function(t,e,n){"use strict";var r=n("c803"),o=n.n(r);o.a},"0a49":function(t,e,n){var r=n("9b43"),o=n("626a"),i=n("4bf8"),a=n("9def"),c=n("cd1c");t.exports=function(t,e){var n=1==t,s=2==t,l=3==t,d=4==t,u=6==t,f=5==t||u,h=e||c;return function(e,c,p){for(var g,v,m=i(e),y=o(m),b=r(c,p,3),_=a(y.length),N=0,C=n?h(e,_):s?h(e,0):void 0;_>N;N++)if((f||N in y)&&(g=y[N],v=b(g,N,m),t))if(n)C[N]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return N;case 2:C.push(g)}else if(d)return!1;return u?-1:l||d?d:C}}},"10b5":function(t,e,n){},"11e9":function(t,e,n){var r=n("52a7"),o=n("4630"),i=n("6821"),a=n("6a99"),c=n("69a8"),s=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=i(t),e=a(e,!0),s)try{return l(t,e)}catch(n){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},"2af7":function(t,e,n){"use strict";var r=n("10b5"),o=n.n(r);o.a},"2e07":function(t,e,n){"use strict";var r=n("b73d"),o=n.n(r);o.a},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},"32a6":function(t,e,n){var r=n("241e"),o=n("c3a1");n("ce7e")("keys",function(){return function(t){return o(r(t))}})},"355d":function(t,e){e.f={}.propertyIsEnumerable},3962:function(t,e,n){"use strict";(function(t){n.d(e,"i",function(){return r}),n.d(e,"j",function(){return o}),n.d(e,"k",function(){return i}),n.d(e,"o",function(){return c}),n.d(e,"b",function(){return s}),n.d(e,"f",function(){return d}),n.d(e,"g",function(){return f}),n.d(e,"c",function(){return h}),n.d(e,"n",function(){return p}),n.d(e,"h",function(){return g}),n.d(e,"a",function(){return v}),n.d(e,"e",function(){return m}),n.d(e,"m",function(){return y}),n.d(e,"l",function(){return b}),n.d(e,"d",function(){return _});function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"function"===typeof t}function i(t){return"[object Promise]"===Object.prototype.toString.call(t)}function a(t,e){return 1===arguments.length&&(e=t,t=0),Math.floor(Math.random()*(e-t+1)+t)}function c(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)n+=r[a(r.length-1)];return e+n}function s(t,e){var n,r=0;while((n=t.indexOf(e))>-1)t.splice(n,1),r++;return r}function l(){if("undefined"!=typeof pageYOffset)return{top:pageYOffset,left:pageXOffset};var t=document.body,e=document.documentElement;return e=e.clientHeight?e:t,{top:e.scrollTop,left:e.scrollLeft}}function d(t){var e=t.getBoundingClientRect(),n=l();return{x:e.left+n.left,y:e.top+n.top}}function u(t){var e=t.offsetParent;return(!e||e===document.body&&"static"===getComputedStyle(document.body).position)&&(e=document.body.parentElement),e}function f(t){var e=u(t),n={x:t.offsetLeft,y:t.offsetTop},r=t;while(1){if(r=r.parentElement,r===e||!r)break;n.x-=r.scrollLeft,n.y-=r.scrollTop}return n}function h(t,e){var n="original_".concat(e);t[n]=t.getAttribute(e)}function p(t,e){var n="original_".concat(e);t.setAttribute(e,t[n])}function g(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function v(t,e){g(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e)}function m(t){var e=t.style.display;t.style.display="block";var n={width:t.offsetWidth,height:t.offsetHeight};return t.style.display=e,n}function y(t,e,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),i=3;i<r;i++)o[i-3]=arguments[i];t.addEventListener?t.addEventListener.apply(t,[e,n].concat(o)):t.attachEvent&&t.attachEvent.apply(t,["on".concat(e),n].concat(o))}function b(t,e,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),i=3;i<r;i++)o[i-3]=arguments[i];t.removeEventListener?t.removeEventListener.apply(t,[e,n].concat(o)):t.detachEvent&&t.detachEvent.apply(t,["on".concat(e),n].concat(o))}function _(t,e,n,r,o){var i,a,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e3;null==n&&(n=0,r=t.length-1);var s,l=0;while(n>=0&&n<=r){if(l>=c)throw Error("binarySearch: loop times is over ".concat(c,", you can increase the limit."));if(i=Math.floor((r-n)/2+n),a=t[i],s=e(a,l),s>0)r=i-1;else{if(!(s<0))return{index:i,value:a,count:l+1,hit:!0};n=i+1}l++}return o?{index:i,value:a,count:l+1,hit:!1,bigger:s>0}:null}}).call(this,n("c8ba"))},"454f":function(t,e,n){n("46a7");var r=n("584a").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"46a7":function(t,e,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"51b6":function(t,e,n){n("a3c3"),t.exports=n("584a").Object.assign},"55dd":function(t,e,n){"use strict";var r=n("5ca1"),o=n("d8e8"),i=n("4bf8"),a=n("79e5"),c=[].sort,s=[1,2,3];r(r.P+r.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!n("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),o(t))}})},"5dbc":function(t,e,n){var r=n("d3f4"),o=n("8b97").set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},"622b":function(t,e,n){"use strict";var r=n("9959"),o=n.n(r);o.a},"650e":function(t,e,n){"use strict";var r=n("725d"),o=n.n(r);o.a},"667d":function(t,e,n){"use strict";var r=n("77a7"),o=n.n(r);o.a},"725d":function(t,e,n){},7514:function(t,e,n){"use strict";var r=n("5ca1"),o=n("0a49")(5),i="find",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(i)},"77a7":function(t,e,n){},"7d7b":function(t,e,n){var r=n("e4ae"),o=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},"7f7f":function(t,e,n){var r=n("86cc").f,o=Function.prototype,i=/^\s*function ([^ (]*)/,a="name";a in o||n("9e1e")&&r(o,a,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"8aae":function(t,e,n){n("32a6"),t.exports=n("584a").Object.keys},"8b97":function(t,e,n){var r=n("d3f4"),o=n("cb7c"),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},9093:function(t,e,n){var r=n("ce10"),o=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},9306:function(t,e,n){"use strict";var r=n("c3a1"),o=n("9aa9"),i=n("355d"),a=n("241e"),c=n("335c"),s=Object.assign;t.exports=!s||n("294c")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){var n=a(t),s=arguments.length,l=1,d=o.f,u=i.f;while(s>l){var f,h=c(arguments[l++]),p=d?r(h).concat(d(h)):r(h),g=p.length,v=0;while(g>v)u.call(h,f=p[v++])&&(n[f]=h[f])}return n}:s},9959:function(t,e,n){},"9a51":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"animated fadeIn"},[t.showDetails?t._e():n("b-row",[n("b-col",{attrs:{sm:"4"}},[n("Categories")],1),n("b-col",{attrs:{sm:"8"}},[n("b-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("strong",[t._v(t._s(t.activeCategoryName))])]),n("b-list-group",t._l(t.products,function(e){return n("b-list-group-item",{staticClass:"pointer",on:{click:function(n){return t.selectProduct(e)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),1)],1)],1)],1),t.showDetails?n("b-row",{staticClass:"d-flex justify-content-center"},[n("b-col",{attrs:{sm:"8"}},[n("Details",{attrs:{_product:t.selectedProduct},on:{close:function(e){t.showDetails=!1}}})],1)],1):t._e()],1)},o=[],i=(n("7f7f"),n("7514"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("div",{staticClass:"d-flex justify-content-between",attrs:{slot:"header"},slot:"header"},[n("strong",[t._v("Детальная информация")]),n("b-button",{staticClass:"category",attrs:{variant:"outline-danger"},on:{click:function(e){return t.close()}}},[t._v("X")])],1),n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("th",{attrs:{scope:"row"}},[t._v("Название")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})])]),n("tr",[n("th",{attrs:{scope:"row"}},[t._v("Категория")]),n("td",[t.showCategoriesList?n("CategoriesToSelect",{attrs:{categories:t.parentCategories},on:{setCategory:function(e){return t.setCategory(e)}}}):n("span",{staticClass:"pointer",on:{click:function(e){t.showCategoriesList=!0}}},[t._v(t._s(t.category.name))])],1)]),n("tr",[n("th",{attrs:{scope:"row"}},[t._v("Иконка")]),n("td",[n("Icons",{attrs:{iconId:t.product.icon_id,categoryId:t.product.category,color:t.product.color},on:{setIcon:function(e){return t.setIcon(e)}}})],1)]),n("tr",[n("th",{attrs:{scope:"row"}},[t._v("Цвет")]),n("td",[n("Palette",{on:{setColor:function(e){return t.setColor(e)}}})],1)]),n("tr",[n("th",{attrs:{scope:"row"}},[t._v("Стоимость")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.product.cost,expression:"product.cost"}],staticClass:"form-control",domProps:{value:t.product.cost},on:{input:function(e){e.target.composing||t.$set(t.product,"cost",e.target.value)}}})])]),n("tr",[n("th",{attrs:{scope:"row"}},[t._v("Статус")]),n("td",[t._v(t._s(t.product.status))])])])]),n("b-row",[n("b-col",{staticClass:"btn-group"},[n("b-button",{staticClass:"btn",attrs:{variant:"outline-success"},on:{click:function(e){return t.save()}}},[t._v("Сохранить")]),n("b-button",{staticClass:"btn",attrs:{variant:"outline-danger"}},[t._v("Удалить")])],1)],1)],1)}),a=[],c=n("f499"),s=n.n(c),l=function(t){return t?JSON.parse(s()(t)):null},d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"list"},t._l(t.icons,function(e){return n("li",[n("i",{staticClass:"icon",style:t.activeStyle(e),on:{click:function(n){return t.setIcon(e)}}},[n("svg",{attrs:{viewBox:e.viewBox,fill:t.color}},[n("path",{attrs:{d:e.d}})])])])}),0)},u=[],f=(n("28a5"),n("c5f6"),{props:{iconId:[String,Number],categoryId:[String,Number],color:String},methods:{setIcon:function(t){this.$emit("setIcon",t.id_rent)},activeStyle:function(t){if(t.id_rent==this.iconId)return{"border-bottom":"3px solid "+this.color}}},computed:{icons:function(){var t=this,e=this.$store.getters.icons,n=this.$store.getters.categories.find(function(e){return e.id_rent==t.categoryId});if(!n||!n.icons_id)return[];var r=n.icons_id.split(","),o=r.map(function(t){return e.find(function(e){return e.id_rent==t})});return o}}}),h=f,p=(n("622b"),n("2877")),g=Object(p["a"])(h,d,u,!1,null,"1945cc0e",null),v=g.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"palette"},[n("ul",{staticClass:"colors"},t._l(t.palette,function(e){return n("li",{key:e,staticClass:"color",style:{backgroundColor:e},on:{click:function(n){return t.onClick(e)}}})}),0)])},y=[],b={data:function(){return{palette:["#ff0000","#0600ff","#397a00","#78ff00","#ff9c00","#b6b6b6","#3c3c3b","#6f00a2","#efefef","#fcff00","#00deff"]}},methods:{onClick:function(t){this.$emit("setColor",t)}}},_=b,N=(n("2e07"),Object(p["a"])(_,m,y,!1,null,"26fb3b7f",null)),C=N.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"list"},t._l(t.categories,function(e){return n("li",{staticClass:"item",on:{click:function(n){return n.stopPropagation(),t.setCategory(e.id_rent)}}},[t._v("\n    "+t._s(e.name)+"\n    "),t.categories&&t.categories.length>0?n("CategoriesToSelect",{attrs:{categories:t.getChildren(e)},on:{setCategory:function(e){return t.setCategory(e)}}}):t._e()],1)}),0)},O=[],x={name:"CategoriesToSelect",props:{categories:[Object,Array]},components:{CategoriesToSelect:k},methods:{getChildren:function(t){var e=this.$store.getters.categories.filter(function(e){return e.parent_id===t.id_rent});return e},setCategory:function(t){this.$emit("setCategory",t)}}},E=x,T=(n("667d"),Object(p["a"])(E,w,O,!1,null,null,null)),k=T.exports,P={name:"Details",components:{Icons:v,Palette:C,CategoriesToSelect:k},props:{_product:{type:Object,default:{}}},data:function(){return{product:l(this._product),showCategoriesList:!1}},methods:{close:function(){this.$emit("close")},save:function(){this.$store.dispatch("updateProduct",this.product),this.close()},setIcon:function(t){this.product.icon_id=t},setColor:function(t){this.product.color=t},setCategory:function(t){this.product.category=t,this.showCategoriesList=!1}},computed:{category:function(){var t=this;if(!this.product||!this.product.category)return!1;var e=this.$store.getters.categories.find(function(e){return e.id_rent===t.product.category});return e},parentCategories:function(){var t=this;return this.$store.getters.categories.filter(function(e){return e.id_rental_org===t.$store.getters.activeRentalPoint&&null===e.parent_id})}}},I=P,j=(n("0983"),Object(p["a"])(I,i,a,!1,null,"47c0b844",null)),S=j.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["tree"===t.show?n("b-card",{staticClass:"tree"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("strong",[t._v("Категории")])]),n("b-row",[n("b-col",[t.items&&t.items.length?n("DraggableTree",{attrs:{data:t.items,draggable:"",crossTree:""},on:{change:t.changeTree},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data,o=e.store;e.vm;return n("div",{},[r.isDragPlaceHolder?t._e():[n("div",{staticClass:"wrap"},[n("div",{staticClass:"text",on:{click:function(e){return t.selectCategory(r)},dblclick:function(e){return t.changeCategory(r)}}},[r.children&&r.children.length?n("b",{on:{click:function(t){return o.toggleOpen(r)}}},[t._v(t._s(r.open?"-":"+")+" ")]):t._e(),n("span",[t._v(t._s(r.text))])]),n("div",{staticClass:"show-btns"},[n("i",{staticClass:"icon-note icons font-ml ml-1",attrs:{title:"Редактировать"},on:{click:function(e){return t.changeCategory(r)}}}),n("i",{staticClass:"icon-close icons font-ml ml-1",attrs:{title:"Удалить"},on:{click:function(e){return t.deleteCategory(r)}}})])])]],2)}}],null,!1,3031476050)}):n("span",[t._v("Нет категорий")])],1)],1),t.showNewCategory?n("b-row",{staticClass:"newCategory"},[n("b-col",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCategoryName,expression:"newCategoryName"}],ref:"newCategory",staticClass:"form-control",attrs:{placeholder:"Новая категория"},domProps:{value:t.newCategoryName},on:{input:function(e){e.target.composing||(t.newCategoryName=e.target.value)}}})])],1):t._e(),n("b-row",{staticClass:"btn-group"},[t.showNewCategory?n("b-col",[n("b-button",{staticClass:"btn",attrs:{variant:"outline-success"},on:{click:function(e){return t.save()}}},[t._v("Сохранить")])],1):t._e(),t.showNewCategory?n("b-col",[n("b-button",{staticClass:"btn",attrs:{variant:"outline-danger"},on:{click:function(e){t.showNewCategory=!t.showNewCategory}}},[t._v("Отмена")])],1):t._e(),t.showNewCategory?t._e():n("b-col",[n("b-button",{staticClass:"btn",attrs:{variant:"outline-success"},on:{click:function(e){return t.newCategory()}}},[t._v("Добавить категорию")])],1)],1)],1):t._e(),"details"===t.show?n("Details",{attrs:{_category:t.categoryToDetails},on:{close:function(e){t.show="tree"}}}):t._e()],1)},D=[],R=(n("55dd"),n("8aae")),A=n.n(R),B=n("51b6"),F=n.n(B),L=n("3962"),H="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function M(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function V(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments[3],r=Object(L["i"])(t)?t:[t],o=r.map(function(t,e){return{item:t,index:e}});n&&o.reverse();var i=function(){var t=o.shift(),r=t.item,i=t.index,a=t.parent,c=e(r,i,a);if(!1===c)return{v:void 0};if("skip children"===c)return"continue";if("skip siblings"===c&&(o=o.filter(function(t){return t.parent!==a})),r.children){var s,l=r.children;n&&(l=l.slice(),l.reverse());var d=l.map(function(t,e){return{item:t,index:e,parent:r}});(s=o).push.apply(s,M(d))}};while(o.length){var a=i();switch(a){case"continue":continue;default:if("object"===("undefined"===typeof a?"undefined":H(a)))return a.v}}}function Y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";t[r]&&Object(L["b"])(t[r][n],t),t[r]=e}function q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";if(t!==e){var o=e[r][n],i=o.indexOf(e);o[i-1]!==t&&(t[r]===e[r]?(Object(L["b"])(o,t),i=o.indexOf(e)):Y(t,e[r]),o.splice(i,0,t))}}function J(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";if(t!==e){var o=e[r],i=o[n],a=i.indexOf(e);i[a+1]!==t&&(t[r]===e[r]?(Object(L["b"])(i,t),a=i.indexOf(e)):Y(t,e[r]),i.splice(a+1,0,t))}}function X(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t===e)throw"can't prepend to self";var r=e[n];r[0]!==t&&(Y(t,e),r.splice(0,0,t))}function W(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t===e)throw"can't append to self";var r=e[n],o=r[r.length-1];o!==t&&(Y(t,e),r.push(t))}n("ac6a");var G=n("454f"),U=n.n(G),z=n("469f"),K=n.n(z);function Q(t){return""===t||t}n("a481");var Z={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},tt={isTouch:function(t){return t.type&&t.type.startsWith("touch")},_getStore:function(t){return t._wrapperStore||(t._wrapperStore=[]),t._wrapperStore},on:function(t,e,n){var r,o,i=this._getStore(t),a=this,c=function(t){var r,o=a.isTouch(t);if(o)r={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY};else if(r={x:t.pageX,y:t.pageY},"start"===e&&1!==t.which)return;return n.call(this,t,r)};i.push({handler:n,wrapper:c});for(var s=arguments.length,l=new Array(s>3?s-3:0),d=3;d<s;d++)l[d-3]=arguments[d];(r=L["m"]).call.apply(r,[null,t,Z[e][0],c].concat(l)),(o=L["m"]).call.apply(o,[null,t,Z[e][1],c].concat(l))},off:function(t,e,n){for(var r=this._getStore(t),o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];for(var c=r.length-1;c>=0;c--){var s,l,d=r[c],u=d.handler,f=d.wrapper;if(n===u)(s=L["l"]).call.apply(s,[null,t,Z[e][0],f].concat(i)),(l=L["l"]).call.apply(l,[null,t,Z[e][1],f].concat(i)),r.splice(c,1)}}},et=tt;
/*!
 * draggable-helper v1.0.20
 * (c) 2018-present phphe <phphe@outlook.com> (https://github.com/phphe)
 * Released under the MIT License.
 */
function nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null==e.minTranslate&&(e.minTranslate=10);var n=l(),r=function(){et.off(t,"end",t._draggbleEventHandler),Object(L["l"])(t,"selectstart",d),delete t._draggbleEventHandler};return t._draggbleEventHandler&&r(),t._draggbleEventHandler=o,et.on(t,"start",t._draggbleEventHandler),Object(L["m"])(t,"selectstart",d),r;function o(t,e){n.mouse={x:e.x,y:e.y},n.initialMouse=Object.assign({},n.mouse),et.on(document,"move",a,{passive:!1}),et.on(window,"end",c)}function i(t){var r=s(),o=r.el,i=r.position;n.el=o,n.initialPosition=Object.assign({},i);var a=e.drag&&e.drag(t,e,n);if(!1===a)return!1;var c=Object(L["e"])(o),l=Object.assign({width:"".concat(c.width,"px"),height:"".concat(c.height,"px"),zIndex:9999,opacity:.6,position:"absolute",left:i.x+"px",top:i.y+"px"},e.style||e.getStyle&&e.getStyle(e)||{});for(var d in Object(L["c"])(o,"style"),l)o.style[d]=l[d];Object(L["c"])(o,"class"),Object(L["a"])(o,e.draggingClass)}function a(t,r){n.mouse={x:r.x,y:r.y};var o=n.move={x:n.mouse.x-n.initialMouse.x,y:n.mouse.y-n.initialMouse.y};if(0===n.movedCount&&e.minTranslate){var a=Math.pow(n.move.x,2),c=Math.pow(n.move.y,2),s=Math.pow(a+c,.5);if(s<e.minTranslate)return}var l=!0;if(0===n.movedCount&&!1===i(t)&&(l=!1),t.preventDefault(),l&&e.moving&&!1===e.moving(t,e,n)&&(l=!1),l){if(!n||!n.el)return;Object.assign(n.el.style,{left:n.initialPosition.x+o.x+"px",top:n.initialPosition.y+o.y+"px"}),n.movedCount++}}function c(t){if(et.off(document,"move",a,{passive:!1}),et.off(window,"end",c),n.movedCount>0){n.movedCount=0;var r=n,o=r.el;e.clone?o.parentElement.removeChild(o):(Object(L["n"])(o,"style"),Object(L["n"])(o,"class")),e.drop&&e.drop(t,e,n)}n=l()}function s(){var r=e.getEl?e.getEl(t,e):t,o=r;return e.clone&&(n.triggerEl=r,o=r.cloneNode(!0),r.parentElement.appendChild(o)),{position:Object(L["g"])(o),el:o}}function l(){return{movedCount:0}}function d(t){t.preventDefault()}}var rt=nt,ot=A.a,it=F.a,at={name:"TreeNode",props:{data:{},store:{},level:{default:0}},data:function(){return{vm:this}},computed:{childrenLevel:function(){return this.level+1},isRoot:function(){return this.data&&this.data.isRoot},childrenVisible:function(){var t=this.data;return this.isRoot||t&&t.children&&t.children.length&&t.open},innerBackStyle:function(){var t={marginBottom:this.store.space+"px"};return!this.isRoot&&this.level>1&&(t.paddingLeft=(this.level-1)*this.store.indent+"px"),t}},watch:{data:{immediate:!0,handler:function(t){t&&(t._vm=this,t._treeNodePropertiesCompleted||t.isRoot||this.store.compeleteNode(t,this.$parent.data))}}}};
/*!
 * vue-draggable-nested-tree v2.2.17
 * (c) 2018-present phphe <phphe@outlook.com>
 * Released under the MIT License.
 */const ct=at;var st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tree-node",class:[t.data.active?t.store.activatedClass:"",t.data.open?t.store.openedClass:"",t.data.class],style:t.data.style,attrs:{id:t.data._id}},[t.isRoot?t._e():t._t("node-inner-back",[n("div",{staticClass:"tree-node-inner-back",class:[t.data.innerBackClass],style:[t.innerBackStyle,t.data.innerBackStyle]},[n("div",{staticClass:"tree-node-inner",class:[t.data.innerClass],style:[t.data.innerStyle]},[t._t("default",null,{data:t.data,store:t.store,vm:t.vm})],2)])],{styleObj:t.innerBackStyle,data:t.data,store:t.store,vm:t.vm}),n("transition",{attrs:{name:t.store.childrenTransitionName}},[t.childrenVisible?n("div",{staticClass:"tree-node-children"},t._l(t.data.children,function(e){return n("TreeNode",{key:e._id,attrs:{data:e,store:t.store,level:t.childrenLevel},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{data:e.data,store:e.store,vm:e.vm})]}},{key:"node-inner-back",fn:function(e){return t.store.customInnerBack?[t._t("node-inner-back",null,{styleObj:e.styleObj,data:e.data,store:e.store,vm:e.vm})]:void 0}}])})}),1):t._e()])],2)},lt=[];const dt=void 0,ut=void 0,ft=void 0,ht=!1;function pt(t,e,n,r,o,i,a,c){const s=("function"===typeof n?n.options:n)||{};return s.__file="TreeNode.vue",s.render||(s.render=t.render,s.staticRenderFns=t.staticRenderFns,s._compiled=!0,o&&(s.functional=!0)),s._scopeId=r,s}var gt=pt({render:st,staticRenderFns:lt},dt,ct,ut,ht,ft,void 0,void 0),vt={props:{data:{},idLength:{type:Number,default:5},indent:{type:Number,default:16},activatedClass:{default:"active"},openedClass:{default:"open"},space:{type:Number,default:10},childrenTransitionName:{},customInnerBack:{}},components:{TreeNode:gt},data:function(){return{store:this,rootData:null}},watch:{data:{immediate:!0,handler:function(t,e){var n=this;t!==e&&(this.rootData=this.rootData||{isRoot:!0,_id:"tree_".concat(this._uid,"_node_root"),children:[]},V(t,function(t,e,r){n.compeleteNode(t,r)}),this.rootData.children=t)}}},methods:{compeleteNode:function(t,e){var n={open:!0,children:[],active:!1,style:{},class:"",innerStyle:{},innerClass:"",innerBackStyle:{},innerBackClass:{}};for(var r in n)t.hasOwnProperty(r)||this.$set(t,r,n[r]);this.$set(t,"parent",e||this.rootData),t.hasOwnProperty("_id")||(t._id="tree_".concat(this._uid,"_node_").concat(Object(L["o"])(this.idLength))),t._treeNodePropertiesCompleted=!0},pure:function(t,e,n){var r=this,o=it({},t);delete o._id,delete o.parent,delete o.children,delete o.open,delete o.active,delete o.style,delete o.class,delete o.innerStyle,delete o.innerClass,delete o.innerBackStyle,delete o.innerBackClass;for(var i=ot(o),a=0;a<i.length;a++){var c=i[a];"_"===c[0]&&delete o[c]}return e&&t.children&&(o.children=t.children.slice(),o.children.forEach(function(t,n){o.children[n]=r.pure(t,e)})),n&&n(o,t)||o},getNodeById:function(t){var e;return V(this.rootData.children,function(n){if(n._id===t)return e=n,!1}),e},getActivated:function(){var t=[];return V(this.rootData.children,function(e){e.active&&t.push(e)}),t},getOpened:function(){var t=[];return V(this.rootData.children,function(e){e.open&&t.push(e)}),t},activeNode:function(t,e){this.activated;e&&this.getActivated().forEach(function(t){t.active=!1}),t.active=!0},toggleActive:function(t,e){t.active?t.active=!1:this.activeNode(t,e)},openNode:function(t,e){var n=this;this.opened;e&&this.getOpened().forEach(function(t){t.open=!1,n.$emit("nodeOpenChanged",t)}),t.open=!0,this.$emit("nodeOpenChanged",t)},toggleOpen:function(t,e){t.open?(t.open=!1,this.$emit("nodeOpenChanged",t)):this.openNode(t,e)},getPureData:function(t){return this.pure(this.rootData,!0,t).children},deleteNode:function(t){return Object(L["b"])(t.parent.children,t)}}};const mt=vt;var yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"he-tree tree"},[n("TreeNode",{attrs:{data:t.rootData,store:t.store},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{data:e.data,store:t.store,vm:e.vm})]}},{key:"node-inner-back",fn:function(e){return t.customInnerBack?[t._t("node-inner-back",null,{styleObj:e.styleObj,data:e.data,store:e.store,vm:e.vm})]:void 0}}])})],1)},bt=[];const _t=void 0,Nt=void 0,Ct=void 0,wt=!1;function Ot(t,e,n,r,o,i,a,c){const s=("function"===typeof n?n.options:n)||{};return s.__file="Tree.vue",s.render||(s.render=t.render,s.staticRenderFns=t.staticRenderFns,s._compiled=!0,o&&(s.functional=!0)),s._scopeId=r,s}var xt=Ot({render:yt,staticRenderFns:bt},_t,mt,Nt,wt,Ct,void 0,void 0),Et=U.a;function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Et(t,r.key,r)}}function Pt(t,e,n){return e&&kt(t.prototype,e),n&&kt(t,n),t}function It(t,e,n){return e in t?Et(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jt=function(){function t(){Tt(this,t),It(this,"store",{})}return Pt(t,[{key:"has",value:function(t){return this.store.hasOwnProperty(t)}},{key:"remember",value:function(t,e){return this.has(t)||(this.store[t]={value:e()}),this.store[t].value}},{key:"forget",value:function(t){t?this.has(t)&&delete this.store[t]:this.store={}}}]),t}();function St(t,e,n){var r=function(r){Et(t,r,{get:function(){var t=this;return e.remember(r,function(){return n[r].call(t)})}})};for(var o in n)r(o)}var $t=K.a;function Dt(t,e){var n=[],r=void 0;do{r!==document.elementFromPoint(t,e)?(r=document.elementFromPoint(t,e),n.push(r),r.style.pointerEvents="none"):r=!1}while(r);return n.forEach(function(t){return t.style.pointerEvents="all"}),n}function Rt(t,e,n){var r,o,i=document.elementsFromPoint(t,e),a=[],c=!0,s=!1,l=void 0;try{for(var d,u=$t(i);!(c=(d=u.next()).done);c=!0){var f=d.value;if(o){if(Object(L["h"])(f,"tree")){r=f;break}a.push(f)}else Object(L["h"])(f,"tree-node")&&(o=f)}}catch(v){s=!0,l=v}finally{try{c||null==u.return||u.return()}finally{if(s)throw l}}if(r){var h=!1;if(!At(o,r))for(var p=0;p<a.length;p++){var g=a[p];if(!At(g,r)){h=!0;break}}if(!h)return n.find(function(t){return t.$el===r})}}function At(t,e){var n=t;while(n)if(n=n.parentNode,n===e)return!0}document.elementsFromPoint||(document.elementsFromPoint=Dt);var Bt={nothing:function(t){},after:function(t){Ft(t.dplh,t.targetNode,t)},before:function(t){Ht(t.targetNode.parent)?q(t.dplh,t.targetNode):Ft(t.dplh,t.targetNode.parent,t)},append:function(t){Ht(t.targetNode)?(W(t.dplh,t.targetNode),t.targetNode.open||t.store.toggleOpen(t.targetNode)):Ft(t.dplh,t.targetNode,t)},prepend:function(t){Ht(t.targetNode)?(X(t.dplh,t.targetNode),t.targetNode.open||t.store.toggleOpen(t.targetNode)):Ft(t.dplh,t.targetNode,t)},"after target parent":function(t){Ft(t.dplh,t.targetNode.parent,t)},"append prev":function(t){Ht(t.targetPrev)?(W(t.dplh,t.targetPrev),t.targetPrev.open||t.store.toggleOpen(t.targetPrev)):Ft(t.dplh,t.targetPrev,t)},"append current tree":function(t){Ht(t.currentTree.rootData)&&W(t.dplh,t.currentTree.rootData)}};function Ft(t,e,n){if(!e)return!1;var r=Vt(e,function(t){return t.parent&&Ht(t.parent)});return!!r&&(J(t,r),!0)}function Lt(t){var e;Ut.hasOwnProperty(t._id)||(e=t.hasOwnProperty("draggable")?t.draggable:!t.parent||Lt(t.parent),Ut[t._id]=e);return Ut[t._id]}function Ht(t){var e;Gt.hasOwnProperty(t._id)||(e=t.hasOwnProperty("droppable")?t.droppable:!t.parent||Ht(t.parent),Gt[t._id]=e);return Gt[t._id]}function Mt(t,e,n,r){var o=e.length;if(r)for(var i=o-1;i>=0;i--){var a=e[i];if(a!==t.node&&n(a,i))return a}else for(var c=0;c<o;c++){var s=e[c];if(s!==t.node&&n(s,c))return s}}function Vt(t,e){var n=t;while(n){if(e(n))return n;n=n.parent}}for(var Yt,qt={"targetNode existed":function(t){return t.targetNode},"targetNode is placeholder":function(t){return t.targetNode.isDragPlaceHolder},"targetNode at top":function(t){return t.targetAtTop},"targetNode at bottom":function(t){return t.targetAtBottom},"targetNode is the second child of root":function(t){return t.currentTreeRootSecondChildExcludingDragging===t.targetNode},"currentTree existed":function(t){return t.currentTree},"currentTree empty":function(t){return!Mt(t,t.currentTree.rootData.children,function(t){return t})},"placeholder existed":function(t){return t.dplhEl},"placeholder in currentTree":function(t){return t.dplhElInCurrentTree},"placeholder at top":function(t){return t.dplhAtTop},"targetNode is open":function(t){return t.targetNode.open},"targetNode has children excluding placeholder":function(t){return Mt(t,t.targetNode.children,function(e){return e!==t.dplh})},"targetNode is 1st child":function(t){return Mt(t,t.targetNode.parent.children,function(t){return t})===t.targetNode},"targetNode is last child":function(t){return Mt(t,t.targetNode.parent.children,function(t){return t},!0)===t.targetNode},"on targetNode middle":function(t){return t.offset.y<=t.tiMiddleY},"at left":function(t){return t.offset.x<t.tiOffset.x},"at indent right":function(t){return t.offset.x>t.tiOffset.x+t.currentTree.indent}},Jt=ot(qt),Xt=function(){var t=Jt[Wt],e=qt[t];qt[t]=function(){return Boolean(e.apply(void 0,arguments))}},Wt=0;Wt<Jt.length;Wt++)Xt();var Gt={},Ut={};function zt(t){var e=this.store.trees,n=t.store,r={event:t.event,el:n.el,vm:this,node:this.data,store:this.store,dplh:this.store.dplh,draggableHelperData:{opt:t.options,store:n}};St(r,new jt,{nodeInnerEl:function(){return this.el.querySelector(".tree-node-inner")},offset:function(){return Object(L["f"])(this.nodeInnerEl)},offset2:function(){return{x:this.offset.x+this.nodeInnerEl.offsetWidth,y:this.offset.y+this.nodeInnerEl.offsetHeight}},offsetToViewPort:function(){var t=this.nodeInnerEl.getBoundingClientRect();return t.x=t.left,t.y=t.top,t},currentTree:function(){var t=Rt(this.offsetToViewPort.x,this.offsetToViewPort.y,e);if(t){var n=this.store;if(null==Yt&&(Yt=n),Yt!==t){if(!Q(n.crossTree)||!Q(t.crossTree))return;Yt=t}if(!Q(t.droppable))return;return t}},currentTreeRootEl:function(){return document.getElementById(this.currentTree.rootData._id)},currentTreeRootOf4:function(){return Kt(this.currentTreeRootEl,this.currentTree.space)},currentTreeRootSecondChildExcludingDragging:function(){var t=this;return this.currentTree.rootData.children.slice(0,3).filter(function(e){return e!==t.node})[1]},dplhEl:function(){return document.getElementById(this.dplh._id)},dplhElInCurrentTree:function(){return Boolean(this.currentTree.$el.querySelector("#".concat(this.dplh._id)))},dplhOf4:function(){return Kt(this.dplhEl,this.currentTree.space)},dplhAtTop:function(){return Math.abs(this.dplhOf4.y-this.currentTreeRootOf4.y)<5},targetAtTop:function(){return Math.abs(this.tiOf4.y-this.currentTreeRootOf4.y)<5},targetAtBottom:function(){return Math.abs(this.tiOf4.y2-this.currentTreeRootOf4.y2)<5},targetNode:function(){var t=this.currentTree;if(!t)throw"no currentTree";var e=this.offset,n=(e.x,e.y),r=t.rootData;while(1){var o=r.children;if(!o)break;if(this.node.parent===r&&(o=o.slice(),o.splice(o.indexOf(this.node),1)),0===o.length)break;var i=Object(L["d"])(o,function(e){var r=document.getElementById(e._id),o=Object(L["f"])(r).y,i=o+r.offsetHeight+t.space;return i<n?-1:o<=n?0:1},null,null,!0);if(r=i.hit?i.value:i.bigger?o[i.index-1]:i.value,!r){r=o[0];break}if(!r)break;var a=document.getElementById(r._id).querySelector(".tree-node-inner"),c=Kt(a,t.space);if(c.y<=n&&n<=c.y2)break}return r},targetNodeEl:function(){return document.getElementById(this.targetNode._id)},tiInnerEl:function(){return this.targetNodeEl.querySelector(".tree-node-inner")},tiOffset:function(){return Object(L["f"])(this.tiInnerEl)},tiOf4:function(){return Kt(this.tiInnerEl,this.currentTree.space)},tiMiddleY:function(){return this.tiOffset.y+this.tiInnerEl.offsetHeight/2},targetPrevEl:function(){var t=this.targetNodeEl.previousSibling;return Object(L["h"])(t,"dragging")&&(t=t.previousSibling),t},targetPrev:function(){var t=this.targetPrevEl.getAttribute("id");return this.currentTree.getNodeById(t)}});var o={},i=function(t){if(!o.hasOwnProperty(t)){var e;try{e=qt[t](r)}catch(n){e=n;try{Object({NODE_ENV:"production",BASE_URL:"/"}).DEVELOPE_SELF&&console.warn("failed to execute rule '".concat(t,"'"),n)}catch(i){}}o[t]=e}return o[t]};!0===i("currentTree existed")?!1===i("targetNode is placeholder")?!0===i("targetNode is the second child of root")?!1===i("targetNode has children excluding placeholder")?!0===i("on targetNode middle")?Bt["before"](r):!1===i("on targetNode middle")&&(!0===i("at indent right")?Bt["append"](r):!1===i("at indent right")&&Bt["after"](r)):!0===i("targetNode has children excluding placeholder")&&Bt["prepend"](r):!1===i("targetNode is the second child of root")&&(!1===i("currentTree empty")?!0===i("targetNode at top")?!0===i("placeholder in currentTree")?!1===i("targetNode has children excluding placeholder")?!1===i("on targetNode middle")?!1===i("at indent right")?Bt["after"](r):!0===i("at indent right")&&Bt["append"](r):!0===i("on targetNode middle")&&Bt["before"](r):!0===i("targetNode has children excluding placeholder")&&(!1===i("on targetNode middle")?Bt["prepend"](r):!0===i("on targetNode middle")&&Bt["before"](r)):!1===i("placeholder in currentTree")&&Bt["before"](r):!1===i("targetNode at top")&&(!1===i("targetNode at bottom")?!0===i("placeholder at top")?Bt["prepend"](r):!1===i("placeholder at top")&&(!0===i("targetNode has children excluding placeholder")?Bt["prepend"](r):!1===i("targetNode has children excluding placeholder")&&(!1===i("targetNode is 1st child")?!1===i("targetNode is last child")?!0===i("on targetNode middle")?!0===i("at indent right")?Bt["append"](r):!1===i("at indent right")&&Bt["after"](r):!1===i("on targetNode middle")&&(!0===i("at indent right")?Bt["append"](r):!1===i("at indent right")&&Bt["after"](r)):!0===i("targetNode is last child")&&(!0===i("at indent right")?Bt["append"](r):!1===i("at indent right")&&Bt["after"](r)):!0===i("targetNode is 1st child")&&(!0===i("targetNode is last child")?Bt["append"](r):!1===i("targetNode is last child")&&(!1===i("on targetNode middle")?!1===i("at indent right")?Bt["after"](r):!0===i("at indent right")&&Bt["append"](r):!0===i("on targetNode middle")&&(!1===i("at indent right")?Bt["after"](r):!0===i("at indent right")&&Bt["append"](r)))))):!0===i("targetNode at bottom")&&(!0===i("placeholder in currentTree")?!1===i("on targetNode middle")?!0===i("at indent right")?Bt["append"](r):!1===i("at indent right")&&Bt["after"](r):!0===i("on targetNode middle")&&Bt["append"](r):!1===i("placeholder in currentTree")&&Bt["append"](r))):!0===i("currentTree empty")&&Bt["append current tree"](r)):!0===i("targetNode is placeholder")&&(!1===i("targetNode at bottom")?!1===i("targetNode is the second child of root")?!0===i("targetNode is 1st child")?!1===i("targetNode is last child")||!0===i("targetNode is last child")&&(!1===i("on targetNode middle")?!0===i("at left")?Bt["after target parent"](r):i("at left"):!0===i("on targetNode middle")&&(!0===i("at left")?Bt["after target parent"](r):i("at left"))):!1===i("targetNode is 1st child")&&(!0===i("targetNode is last child")?!0===i("on targetNode middle")?!0===i("at left")?Bt["after target parent"](r):!1===i("at left")&&(!0===i("at indent right")?Bt["append prev"](r):i("at indent right")):!1===i("on targetNode middle")&&(!0===i("at left")?Bt["after target parent"](r):!1===i("at left")&&(!0===i("at indent right")?Bt["append prev"](r):i("at indent right"))):!1===i("targetNode is last child")&&(!0===i("on targetNode middle")?!0===i("at left")||!1===i("at left")&&(!0===i("at indent right")?Bt["append prev"](r):i("at indent right")):!1===i("on targetNode middle")&&(!0===i("at left")||!1===i("at left")&&(!0===i("at indent right")?Bt["append prev"](r):i("at indent right"))))):!0===i("targetNode is the second child of root")&&(!0===i("on targetNode middle")?!0===i("at indent right")?Bt["append prev"](r):i("at indent right"):!1===i("on targetNode middle")&&(!0===i("at indent right")?Bt["append prev"](r):i("at indent right"))):!0===i("targetNode at bottom")&&(!0===i("targetNode is 1st child")?!1===i("on targetNode middle")?!0===i("at left")?Bt["after target parent"](r):i("at left"):!0===i("on targetNode middle")&&(!1===i("at left")||!0===i("at left")&&Bt["after target parent"](r)):!1===i("targetNode is 1st child")&&(!1===i("on targetNode middle")?!0===i("at left")?Bt["after target parent"](r):!1===i("at left")&&(!0===i("at indent right")?Bt["append prev"](r):i("at indent right")):!0===i("on targetNode middle")&&(!0===i("at left")?Bt["after target parent"](r):!1===i("at left")&&(!0===i("at indent right")?Bt["append prev"](r):i("at indent right")))))):i("currentTree existed")}function Kt(t,e){var n=Object(L["f"])(t);return n.x2=n.x+t.offsetWidth,n.y2=n.y+t.offsetHeight+e,n}zt.dragStart=function(){},zt.dragEnd=function(){Yt=null,Gt={},Ut={}};var Qt={extends:gt,name:"TreeNode",mounted:function(){var t=this;if(this.store.isNodeDraggable=Lt,this.store.isNodeDroppable=Ht,!this.isRoot&&!this.data.isDragPlaceHolder){var e=this.store.dplh;this.$watch("store.draggable",function(n){if(Q(n)){var r=t.store.getTriggerEl?t.store.getTriggerEl(t):t.$el.querySelector(".tree-node-inner");t._draggableDestroy=rt(r,{preventSelect:Q(t.store.preventSelect),getEl:function(){return t.$el},minTranslate:10,drag:function(n,r,o){zt.dragStart();var i={event:n,options:r,store:o};if(t.store.ondragstart&&!1===t.store.ondragstart(t.data,i))return!1;if(!Lt(t.data))return!1;t.store.$emit("drag",t.data);var a=t.data.parent.children;t.startPosition={siblings:a,index:a.indexOf(t.data)},e.innerStyle.height=o.el.offsetHeight+"px",J(e,t.data),t.data.class+=" dragging"},moving:function(e,n,r){if(0!==r.movedCount){var o={event:e,options:n,store:r};return zt.call(t,o)}},drop:function(n,r,o){zt.dragEnd();var i={event:n,options:r,store:o};if(t.store.ondragend&&!1===t.store.ondragend(t.data,i))Object(L["b"])(e.parent.children,e);else{var a=e._vm.store,c=a!==t.store,s=c?t.store:null;J(t.data,e),Object(L["b"])(e.parent.children,e),t.data.class=t.data.class.replace(/(^| )dragging( |$)/g," "),a.$emit("drop",t.data,a,s),s&&s.$emit("drop",t.data,a,s);var l=t.data.parent.children;l===t.startPosition.siblings&&l.indexOf(t.data)===t.startPosition.index||(t.store.$emit("change",t.data,a,s),s&&s.$emit("change",t.data,a,s)),t.startPosition=null}}})}else t._draggableDestroy&&(t._draggableDestroy(),t._draggableDestroy=null)},{immediate:!0})}}};const Zt=Qt,te=void 0,ee=void 0,ne=void 0,re=void 0;function oe(t,e,n,r,o,i,a,c){const s=("function"===typeof n?n.options:n)||{};return s.__file="DraggableTreeNode.vue",s.render||(s.render=t.render,s.staticRenderFns=t.staticRenderFns,s._compiled=!0,o&&(s.functional=!0)),s._scopeId=r,s}var ie=oe({},te,Zt,ee,re,ne,void 0,void 0),ae=[],ce={_id:"draggable_tree_drag_placeHolder",level:null,droppable:!1,isDragPlaceHolder:!0,class:"draggable-placeholder",style:{},innerStyle:{},innerClass:"draggable-placeholder-inner",innerBackStyle:{},innerBackClass:"draggable-placeholder-inner-back"},se={extends:xt,props:{getTriggerEl:{type:Function},draggable:{},droppable:{default:!0},crossTree:{},ondragstart:{type:Function},ondragend:{type:Function},preventSelect:{default:!0}},components:{TreeNode:ie},data:function(){return{dplh:ce,trees:ae}},created:function(){ae.push(this)},mounted:function(){},beforeDestroy:function(){Object(L["b"])(ae,this)}};const le=se,de=void 0,ue=void 0,fe=void 0,he=void 0;function pe(t,e,n,r,o,i,a,c){const s=("function"===typeof n?n.options:n)||{};return s.__file="DraggableTree.vue",s.render||(s.render=t.render,s.staticRenderFns=t.staticRenderFns,s._compiled=!0,o&&(s.functional=!0)),s._scopeId=r,s}var ge=pe({},de,le,ue,he,fe,void 0,void 0),ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{staticClass:"tree"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("strong",[t._v("Редактировать категорию")])]),n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("th",{attrs:{scope:"row"}},[t._v("ID")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.category.id_rent,expression:"category.id_rent"}],staticClass:"form-control",attrs:{disabled:""},domProps:{value:t.category.id_rent},on:{input:function(e){e.target.composing||t.$set(t.category,"id_rent",e.target.value)}}})])]),n("tr",[n("th",{attrs:{scope:"row"}},[t._v("Название")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],staticClass:"form-control",domProps:{value:t.category.name},on:{input:function(e){e.target.composing||t.$set(t.category,"name",e.target.value)}}})])]),n("tr",[n("th",{attrs:{scope:"row"}},[t._v("Набор иконок")]),n("td",[n("Icons",{attrs:{category:t.category},on:{selectIcon:function(e){return t.selectIcon(e)}}})],1)])])]),n("b-row",{staticClass:"btn-group"},[n("b-col",[n("b-button",{staticClass:"btn",attrs:{variant:"outline-success"},on:{click:function(e){return t.save()}}},[t._v("Сохранить")])],1),n("b-col",[n("b-button",{staticClass:"btn",attrs:{variant:"outline-danger"},on:{click:function(e){return t.$emit("close")}}},[t._v("Отмена")])],1)],1)],1)},me=[],ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"list"},[t._l(t.icons,function(e){return n("i",{staticClass:"icon",on:{click:function(n){return t.click(e.id)}}},[n("svg",{attrs:{viewBox:e.viewBox,fill:t.color}},[n("path",{attrs:{d:e.d}})])])}),n("i",{staticClass:"icon-plus icons font-ml ml-1 pointer",attrs:{title:"Добавить"}})],2)])},be=[],_e={props:{category:Object},data:function(){return{ids:this.makeIds(),color:"black"}},methods:{makeIds:function(){if(!this.category||!this.category.icons_id)return[];var t=this.category.icons_id.split(",");return t},click:function(t){this.$emit("selectIcon",t)}},computed:{icons:function(){var t=this,e=this.ids.map(function(e){return t.$store.getters.icons.find(function(t){return t.id_rent==e})});return e}}},Ne=_e,Ce=(n("2af7"),Object(p["a"])(Ne,ye,be,!1,null,"20bd8e8f",null)),we=Ce.exports,Oe={components:{Icons:we},props:{_category:Object},data:function(){return{category:l(this._category)}},methods:{save:function(){this.$store.dispatch("updateCategory",this.category),this.$emit("close")},selectIcon:function(t){this.category.iconId=t}}},xe=Oe,Ee=Object(p["a"])(xe,ve,me,!1,null,null,null),Te=Ee.exports,ke={components:{DraggableTree:ge,Details:Te},beforeCreate:function(){this.$store.dispatch("getCategories")},data:function(){return{showNewCategory:!1,newCategoryName:"",show:"tree",categoryToDetails:null}},methods:{changeTree:function(t,e){if(console.log("tree",e.getPureData()),!e)return!1;this.$store.dispatch("changeCategoriesTree",e.getPureData())},selectCategory:function(t){if(!t||!t.id_rent)return!1;this.$store.commit("activeCategory",t.id_rent)},newCategory:function(){var t=this;this.showNewCategory=!this.showNewCategory,this.$nextTick(function(){return t.$refs.newCategory.focus()})},save:function(){var t={name:this.newCategoryName,appId:this.$store.getters.activeRentalPoint};this.$store.dispatch("newCategory",t),this.showNewCategory=!this.showNewCategory},deleteCategory:function(t){var e=this.$store.getters.products,n=e.filter(function(e){return e.category===t.id_rent});if(n&&n.length)return alert("К категории привязаны товары, удаление не возможно"),!1;this.$store.dispatch("deleteCategory",{idRent:t.id_rent,appId:this.$store.getters.activeRentalPoint})},changeCategory:function(t){this.show="details",this.categoryToDetails={name:t.name,id_rent:t.id_rent,icons_id:t.icons_id}}},computed:{items:function(){var t=this,e=function(t){if(!t||!t.map)return[];var e=function(e){return t.filter(function(t){return t.parent_id===e.id_rent})},n=function(t){return t.sort(function(t,e){return t.position-e.position})},r=function t(r){return r.map(function(r){var o=e(r),i=n(o);return r.children=t(i),r}),r},o=t.map(function(t){return t.text=t.name,t}),i=o.filter(function(t){return!t.parent_id}),a=n(i),c=r(a);return c},n=this.$store.getters.categories,r=n.filter(function(e){return e.id_rental_org===t.$store.getters.activeRentalPoint});return e(l(r))}}},Pe=ke,Ie=(n("faa0"),Object(p["a"])(Pe,$,D,!1,null,null,null)),je=Ie.exports,Se={components:{Details:S,Categories:je},beforeCreate:function(){var t=this;this.$store.dispatch("multiRequest",[{cmd:"getProducts"}]).then(function(){t.rentalPoints&&t.rentalPoints.length>0&&(t.selectedPoint=t.rentalPoints[0])})},data:function(){return{selectedProduct:{},showDetails:!1}},methods:{selectRental:function(t){this.selectedPoint=t},selectProduct:function(t){this.selectedProduct=t,this.showDetails=!0}},computed:{rentalPoints:function(){return this.$store.getters.rentalPoints},activeCategory:function(){return this.$store.getters.activeCategory},activeCategoryName:function(){var t=this;if(!this.activeCategory)return"No category";var e=this.$store.getters.categories.find(function(e){return e.id_rent===t.activeCategory});return e?e.name:""},products:function(){var t=this,e=this.$store.getters.products;if(!e)return[];var n=this.$store.getters.activeRentalPoint;if(!n)return[];var r=e.filter(function(t){return t.id_rental_org===n});return r.filter(function(e){return e.category===t.activeCategory})}}},$e=Se,De=(n("650e"),Object(p["a"])($e,r,o,!1,null,"7f58de7c",null));e["default"]=De.exports},"9aa9":function(t,e){e.f=Object.getOwnPropertySymbols},a21f:function(t,e,n){var r=n("584a"),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},a3c3:function(t,e,n){var r=n("63b6");r(r.S+r.F,"Object",{assign:n("9306")})},b73d:function(t,e,n){},c5f6:function(t,e,n){"use strict";var r=n("7726"),o=n("69a8"),i=n("2d95"),a=n("5dbc"),c=n("6a99"),s=n("79e5"),l=n("9093").f,d=n("11e9").f,u=n("86cc").f,f=n("aa77").trim,h="Number",p=r[h],g=p,v=p.prototype,m=i(n("2aeb")(v))==h,y="trim"in String.prototype,b=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():f(e,3);var n,r,o,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var a,s=e.slice(2),l=0,d=s.length;l<d;l++)if(a=s.charCodeAt(l),a<48||a>o)return NaN;return parseInt(s,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(m?s(function(){v.valueOf.call(n)}):i(n)!=h)?a(new g(b(e)),n,p):b(e)};for(var _,N=n("9e1e")?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;N.length>C;C++)o(g,_=N[C])&&!o(p,_)&&u(p,_,d(g,_));p.prototype=v,v.constructor=p,n("2aba")(r,h,p)}},c803:function(t,e,n){},ce7e:function(t,e,n){var r=n("63b6"),o=n("584a"),i=n("294c");t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},de4c:function(t,e,n){},f499:function(t,e,n){t.exports=n("a21f")},faa0:function(t,e,n){"use strict";var r=n("de4c"),o=n.n(r);o.a}}]);
//# sourceMappingURL=chunk-4948d0c0.853b2f13.js.map